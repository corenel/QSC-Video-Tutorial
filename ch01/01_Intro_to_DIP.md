# 数字图像基础知识
## 什么是数字图像
首先，一幅图像可以定义为一个二维函数$$f(x,y)$$，其中$$x$$、$$y$$代表的是空间（当然这里指的是平面）坐标，而$$f(x,y)$$则称为在坐标$(x,y)$出的**强度值**或者**灰度值**。当然，$$f(x,y)$$不一定只输出一个值，它也可以是多通道的。当$$x$$、$$y$$、$$f(x,y)$$的取值都是**离散的有限值**的时候，这个图像就被称为是**数字图像**(Digital image)。也就是说，一个数字图像是由有限数量的元素组成的，这个元素我们通常称为**像素**(Pixel)。
> PS：Pixel其实是Picture element的缩写，也就是“图像元素”，简称像素。

换句话来说，一个数字图像也可以理解为一个$$x\times y$$的二维矩阵，矩阵中的每个元素对应$$f(x,y)$$。

## 为什么是离散的？
数字图像要求$$x$$、$$y$$、$$f(x,y)$$的取值都是离散的有限值，这其实同模拟信号与数字信号有关。通过之后的章节我们可以知道，照射在照相机的传感器上的光信号，以及通过感知光信号而得到的电压信号都是模拟信号，这种模拟信号是连续的。更为广泛地说，大多数传感器的输出都是连续的电压波形，其幅度与空间特性与与所感知的物理现象有关。总而言之，我们得到的输入信号大多是连续的模拟信号。

![Fig 1.1](../image/Fig_1.1.png)

那么为什么不直接采用这些模拟信号呢？主要原因是模拟信号不利于保存与传输，而数字信号则可以。同时，我们的计算机系统的存储也是离散化的。所以获取图像的方法有很多，但是目的都是相同的，就是从感知到的信号转换为数字信号，以便于我们对其进行分析与加工。

## 采样与量化
要将连续的模拟信号转化为离散的数字信号，需要经过采样与量化这两个步骤。

**采样**(Sampling)指的是在空间域上的离散化，也就是对于坐标$$(x,y)$$进行离散化。**量化**(Quantization)指的是幅度域上的离散化，也就是对于$$f(x,y)$$的离散化。

![Fig 1.2](../image/Fig_1.2.png)

以上图为例，图(b)中的一维函数是图(a)中沿线段$$AB$$的连续图像幅度曲线。采样指的是在横轴$$x$$上等间隔地取点，这些被取到的点是一组离散的位置。而量化指的是在纵轴$$f(x,y)$$上将幅度值划分为几个范围，在某一特定范围内的幅度值都赋予一个相同的特定值。经过采样与量化之后，一个连续的图像就被离散化为一个数字图像。如下图所示。

![Fig 1.3](../image/Fig_1.3.png)

## 图像的基本参数
![Fig 1.4](../image/Fig_1.4.jpg)

首先看这样一张图，这是Falcom公司出品的游戏《零之轨迹》OST的封底。打开图片的属性窗口，我们可以看到如下几个参数：

|Property|Value|
|:|:|
|Dimension|1920*1200|
|Width|1920 pixels|
|Height|1200 pixels|
|Bit depth|24|
|Item type|JPG file|

### 位图（Bitmap）
我们所说的位图，就是一个个像素纵横排成阵列所组成的数字图像，每个像素的颜色信息由RGB组合或者灰度值表示。

> 另一种图像的表述方式是矢量图，主要用基于数学方程的几何图元表示图像。特点是文件相对较小，而且任意放大矢量图形，不会丢失细节或影响清晰度。

![Fig 1.5](../image/Fig_1.5.png)

### 图像分辨率(Image resolution)
我们这里所说的分辨率，指的是一个图像的分辨率，也就是其长宽方向上的像素数量。一般来说，分辨率既可以使用“长$$\times$$宽”的形式来表述，也可以直接采用总的像素数量。例如，常见的按照标准屏幕分辨率分，有$$1920\times 1080$$、$$1650\times 1050$$、$$1366\times 768$$等；按照相机拍摄的分，可以有$$7952\times 5304$$（Sony A7R2，42.4 megapixels）、$$7360\times 4192$$（Nikon D810）、$$4240\times 2832$$（Sony A7S，12.2 megapixels）；也有按照特定的应用分，例如$$500\times 500$$这样的正方形图像。

> 分辨率这个概念比较模糊，除了上面的一种说法表示每一个方向上的像素数量外，还能指代每英寸所含点或像素数，也就是dpi与ppi。具体的差别可以参考[这个知乎问题](http://www.zhihu.com/question/21220154)。

### 位深度（Bit depth）
位深度指的是在位图中，每一个像素所携带的颜色信息的比特数。根据位深度,可将位图分为1、4、8、16、24及32位图像等。每个像素使用的信息位数越多，可用的颜色就越多，颜色表现就越逼真，相应的数据量越大。例如，位深度为1的像素位图只有两个可能的值（黑色和白色），所以又称为二值位图。位深度为8的图像有$$2^8$$（即256）个可能的值。

我们常见的是携带有R、G、B三种颜色通道的图像，也就是RGB图像。一般来说，R、G、B三种颜色通道，每个通道占8bit，合起来总共24bit。一些图像格式支持透明通道，Alpha通道也要占8bit，所以合起来占32bit，称为RGBA图像。

### 图像格式（Image Format）
图像有着不同的格式，这其中主要是由于采用了不同的压缩算法所造成的。压缩可以分为有损压缩与无损压缩，有损压缩指的是在压缩过程中有信息的丢失，解压缩之后无法还原出源图像；而无损压缩则不然。常见的图像格式如下：

| 后缀名 | 简介 |
| -- | -- |
| .bmp | 最常被Microsoft Windows 程序以及其本身使用的格式。可以使用无损的数据压缩。 |
| .jpg | 使用有损压缩，图片品质可根据压缩的设定而有所不同。 |
| .png | 无损压缩位图格式，可携带透明通道。 |
| .gif | 支持动画图像，支持256色，对真彩图片进行有损压缩。使用多祯可以提高颜色准确度。 |
| .tif/.tiff | 大量的用于传统图像印刷，可进行有损或无损压缩。 |
| .eps/.ai/.svg | 矢量图文件格式。 |
| .raw/.cr2/.nef/.dng | 通常为相机所拍摄的无损图像，大部分基于TIFF |

